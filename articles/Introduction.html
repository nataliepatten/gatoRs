<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="gatoRs">
<title>Introduction to gatoRs • gatoRs</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to gatoRs">
<meta property="og:description" content="gatoRs">
<meta property="og:image" content="https://nataliepatten.github.io/gatoRs/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-302EP2FLJD"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-302EP2FLJD');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gatoRs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Introduction.html">Introduction to gatoRs</a>
    <a class="dropdown-item" href="../articles/ManyDownloads.html">Many Downloads with gatoRs</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nataliepatten/gatoRs/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to gatoRs</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nataliepatten/gatoRs/blob/HEAD/vignettes/Introduction.Rmd" class="external-link"><code>vignettes/Introduction.Rmd</code></a></small>
      <div class="d-none name"><code>Introduction.Rmd</code></div>
    </div>

    
    
<p>gatoRs (Geographic and Taxonomic Occurrence R-Based Scrubbing)
provides users with tools to streamline the downloading and processing
biodiversity data.</p>
<div class="section level2">
<h2 id="data-downloading">Data Downloading<a class="anchor" aria-label="anchor" href="#data-downloading"></a>
</h2>
<div class="section level3">
<h3 id="identifying-synonyms">Identifying Synonyms<a class="anchor" aria-label="anchor" href="#identifying-synonyms"></a>
</h3>
<p>Historically, many names may have been used to refer to your taxa of
interest. For example, specimen representing <i>Galax urceolata</i>
(Diapensiaceae) can be found under the scientific name <i>Galax
aphylla</i>, despite the latter being invalidated over 50 years ago (<a href="https://en.wikipedia.org/wiki/Galax" class="external-link">see more here</a>). Since
synonyms are common, we designed gatoRs retrieve biodiversity records
based on a list of names, however the user must supply the synonym
list.</p>
<p>There are many databases available to compile synonym lists for plant
species including:</p>
<ul>
<li><a href="https://wfoplantlist.org/" class="external-link">World Flora Online - WFO Plant
List</a></li>
<li><a href="https://www.tropicos.org/" class="external-link">TROPICOS</a></li>
<li><a href="https://powo.science.kew.org/" class="external-link">World Checklist of Vascular
Plants</a></li>
<li><a href="https://plants.usda.gov/home" class="external-link">USDA PLANTS Database</a></li>
<li><a href="https://www.ipni.org/" class="external-link">International Plant Names
Index</a></li>
<li><a href="https://www.worldplants.de/world-plants-complete-list/complete-plant-list" class="external-link">World
Plants</a></li>
</ul>
<p>Many R packages have been developed to access these databases
including:</p>
<ul>
<li><a href="https://docs.ropensci.org/taxize/" class="external-link">taxize</a></li>
<li><a href="https://github.com/EnquistLab/RTNRS" class="external-link">RTNRS</a></li>
<li><a href="https://cran.r-project.org/package=WorldFlora" class="external-link">WorldFlora</a></li>
<li><a href="https://cran.r-project.org/package=Taxonstand" class="external-link">Taxonstand</a></li>
<li><a href="https://github.com/ecoinfor/U.Taxonstand" class="external-link">U.Taxonstand</a></li>
</ul>
</div>
<div class="section level3">
<h3 id="download-with-gators">Download with gatoRs<a class="anchor" aria-label="anchor" href="#download-with-gators"></a>
</h3>
<p>With <code><a href="../reference/gators_download.html">gators_download()</a></code> you can obtain biodiversity
records for your species of interest from both GBIF and iDigBio. This
function is innovative in how it searches iDigBio. Unlike
<code>spocc::occ()</code>, we do not query the iDigBio API using the
scientific name field, as this will only return exact matches. Instead,
we designed a “pseudo-fuzzy match” to search all fields for partial
matches to the supplied scientific names. Additionally, the columns
returned have been handpicked to aid in processing records for
investigations of species distributions (see more
<code><a href="../reference/gators_download.html">gators_download()</a></code>).</p>
<p>After you identify synonyms, create a list of all possible names for
your species of interest with the first name in the list as the accepted
name (ex. <code>c("Galax urceolata", "Galax aphylla")</code>). Note, the
first name in your list will be used to identify the GBIF species code
when <code>gbif_match = "code"</code>.</p>
<p>Example:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nataliepatten.github.io/gatoRs/">gatoRs</a></span><span class="op">)</span></span>
<span><span class="va">galaxdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gators_download.html">gators_download</a></span><span class="op">(</span>synonyms.list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Galax urceolata"</span>, <span class="st">"Galax aphylla"</span><span class="op">)</span>, </span>
<span>                write.file <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                filename <span class="op">=</span> <span class="st">"base_folder/my_file.csv"</span>, <span class="co"># Location to save file - must end in .csv</span></span>
<span>                gbif.match <span class="op">=</span> <span class="st">"fuzzy"</span>,</span>
<span>                idigbio.filter <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="data-processing">Data Processing<a class="anchor" aria-label="anchor" href="#data-processing"></a>
</h2>
<p>We downloaded 7742 observations for <i>Galax urceolata</i> in the
example above. Of these observations, only those with locality
information will be helpful when investigating this species
distribution.</p>
<div class="section level3">
<h3 id="identify-records-missing-locality-information">Identify Records Missing Locality Information<a class="anchor" aria-label="anchor" href="#identify-records-missing-locality-information"></a>
</h3>
<p>Locality information can be redacted or skewed due to protect
threatened taxa, often locality information will be provided upon
request or can be identified through georeferencing. We created
functions to aid in this process.</p>
<div class="section level4">
<h4 id="redacted-records">Redacted Records<a class="anchor" aria-label="anchor" href="#redacted-records"></a>
</h4>
<p>Locality information can be redacted or skewed due to protect
threatened taxa; often locality information will be provided to aid
research upon request.</p>
<p>To find data that needs to be manually received by an institution via
a permit (or removed from the data set), use
<code><a href="../reference/needed_records.html">needed_records()</a></code>. After receiving the data from herbaria,
manually merge the obtained records with your original data set.</p>
<p>Example:</p>
<pre><code><span><span class="va">redacted_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/needed_records.html">needed_records</a></span><span class="op">(</span><span class="va">galaxdf</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="records-to-georeference">Records to Georeference<a class="anchor" aria-label="anchor" href="#records-to-georeference"></a>
</h4>
<p>Some records may be missing latitude and longitude values, however
locality information can be used to assign coordinates to the record
through georeferencing.</p>
<p>To find data lacking coordinates but containing locality information,
use <code><a href="../reference/need_to_georeference.html">need_to_georeference()</a></code>. You should georeference these
records and then manually merge the obtain records with your original
data set.</p>
<p>Example:</p>
<pre><code><span><span class="va">to_georeference</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/need_to_georeference.html">need_to_georeference</a></span><span class="op">(</span><span class="va">galaxdf</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="merging-retained-records">Merging Retained Records<a class="anchor" aria-label="anchor" href="#merging-retained-records"></a>
</h4>
<p>After receiving the data from herbaria or through georeferencing, you
will want to merge the obtained records with your original data set.</p>
<p>Note, the following steps will only work if columns are equivalent
between the two data sets you hope to merge. If the columns are not
equivalent, we recommend bcd::bcd_standardize_datasets()</p>
<p>Example:</p>
<pre><code><span><span class="co"># Avoid duplicates by removing the records you are about to merge</span></span>
<span><span class="va">dfsub</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remove_missing.html">remove_missing</a></span><span class="op">(</span><span class="va">galaxdf</span><span class="op">)</span></span>
<span><span class="co"># Use gator_merge to merge the main data set with retrieved records</span></span>
<span><span class="va">dfnew</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gators_merge.html">gators_merge</a></span><span class="op">(</span><span class="va">dfsub</span>, <span class="va">retrieved_records</span><span class="op">)</span></span>
<span><span class="co"># Version control - save a copy prior to any additional processing!!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">dfnew</span>, <span class="st">"data/merged_data_Galax_urceolata_YYYYMMDD.csv"</span><span class="op">)</span> <span class="co">## Version control!</span></span>
<span><span class="co"># Set gatordf equal to the newly merged data set</span></span>
<span><span class="va">gatordf</span> <span class="op">&lt;-</span> <span class="va">dfnew</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="occurrence-data-cleaning">Occurrence Data Cleaning<a class="anchor" aria-label="anchor" href="#occurrence-data-cleaning"></a>
</h3>
<p>Here we walk through each cleaning function, however we also created
a simple one-step option <code><a href="../reference/full_clean.html">full_clean()</a></code>, see below.</p>
<div class="section level4">
<h4 id="resolve-taxon-names">Resolve Taxon Names<a class="anchor" aria-label="anchor" href="#resolve-taxon-names"></a>
</h4>
<p>To find data containing scientific names corresponding to your
desired species, use <code><a href="../reference/taxa_clean.html">taxa_clean()</a></code>. Use your downloaded data
from the first step as input, as well as a synonyms list, the accepted
name, and the filter option (exact, fuzzy, or interactive).</p>
<p>Example:</p>
<pre><code><span><span class="va">galaxdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/taxa_clean.html">taxa_clean</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">galaxdf</span>,  </span>
<span>                      synonyms.list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Galax urceolata"</span>, <span class="st">"Galax aphylla"</span><span class="op">)</span>, </span>
<span>                      taxa.filter <span class="op">=</span> <span class="st">"fuzzy"</span>, </span>
<span>                      accepted.name <span class="op">=</span> <span class="st">"Galax urceolata"</span><span class="op">)</span> <span class="co"># creates a new column with accepted name for easy comparison</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="clean-locality">Clean Locality<a class="anchor" aria-label="anchor" href="#clean-locality"></a>
</h4>
<div class="section level5">
<h5 id="basic-locality-clean">Basic Locality Clean<a class="anchor" aria-label="anchor" href="#basic-locality-clean"></a>
</h5>
<p>Here we remove any records with missing coordinates, impossible
coordinates, coordinates at (0,0), and any that are flagged as skewed.
The skewed records can be identified with the
<code><a href="../reference/remove_skewed.html">remove_skewed()</a></code> function and row value for the
‘InformationWitheld’ column. We also provide the option to round the
provided latitude and longitude values to a specified number of decimal
places.</p>
<pre><code><span><span class="va">galaxdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_locality_clean.html">basic_locality_clean</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">galaxdf</span>,  </span>
<span>                      remove.zero <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># Records at (0,0) are removed</span></span>
<span>                      precision <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># latitude and longitude are rounded </span></span>
<span>                      digits <span class="op">=</span> <span class="fl">2</span>, <span class="co"># round to 2 decimal places</span></span>
<span>                      remove.skewed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level5">
<h5 id="find-and-remove-flagged-points">Find and Remove Flagged Points<a class="anchor" aria-label="anchor" href="#find-and-remove-flagged-points"></a>
</h5>
<p>To find records that may have problematic coordinates, use
<code><a href="../reference/process_flagged.html">process_flagged()</a></code>. This function can either automate the
process of finding and removing problematic points
(<code>interactive = FALSE</code>) or allow for manual inspection. The
latter will let you manually remove points deemed improper by viewing
the points on a graph.</p>
<p>This function utilizes
<code><a href="https://ropensci.github.io/CoordinateCleaner/reference/clean_coordinates.html" class="external-link">CoordinateCleaner::clean_coordinates()</a></code>.</p>
<p>Example:</p>
<pre><code><span><span class="va">galaxdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_flagged.html">process_flagged</a></span><span class="op">(</span><span class="va">galaxdf</span>, interactive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<p><img src="img/map1.png" width="753" style="display: block; margin: auto;"><strong>Figure 1</strong>: Interactive map that appears when
<code><a href="../reference/process_flagged.html">process_flagged()</a></code> is run.</p>
<p><img src="img/map2.png" width="736" style="display: block; margin: auto;"><strong>Figure 2</strong>: Interactive map that appears after we remove
points interactively with <code><a href="../reference/process_flagged.html">process_flagged()</a></code>. Points 1, 3,
5, 6, and 7 were removed.</p>
</div>
</div>
<div class="section level4">
<h4 id="remove-duplicate-records">Remove Duplicate Records<a class="anchor" aria-label="anchor" href="#remove-duplicate-records"></a>
</h4>
<p>Here we identify and remove both (1) specimen duplicates and (2)
aggregator duplicates based on each specimens coordinates, occurrenceID,
and eventDate. To leverage all date information available, set
<code>remove.unparseable = FALSE</code> to manually populate the year,
month, and day columns. Here, we also confirm all ID (UUID and key) are
unique to remove any within-aggregator duplicates that may accumulate
due to processing errors.</p>
<p>Example:</p>
<pre><code><span><span class="va">galaxdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remove_duplicates.html">remove_duplicates</a></span><span class="op">(</span><span class="va">galaxdf</span>, remove.unparseable <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="remove-particular-record-bases">Remove Particular Record Bases<a class="anchor" aria-label="anchor" href="#remove-particular-record-bases"></a>
</h4>
<p>Sometimes, certain bases of records may want to be removed from the
data set. To do this, we provide <code><a href="../reference/basis_clean.html">basis_clean()</a></code>. This
function can be used interactively by simply supplying a df, but no
basis.list value.If a list of basis is provided, the function will
select only records where the basisOfRecord value fuzzy match values in
the list provided.</p>
<p>Example:</p>
<pre><code><span><span class="va">galaxdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basis_clean.html">basis_clean</a></span><span class="op">(</span><span class="va">galaxdf</span>, </span>
<span>                       basis.list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HUMAN_OBSERVATION"</span>, <span class="st">"PRESERVED_SPECIMEN"</span>, </span>
<span>                                      <span class="st">"MATERIAL_SAMPLE"</span>, <span class="st">"LIVING_SPECIMEN"</span>,  </span>
<span>                                      <span class="st">"PreservedSpecimen"</span>, <span class="st">"Preserved Specimen"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="spatial-correction">Spatial Correction<a class="anchor" aria-label="anchor" href="#spatial-correction"></a>
</h4>
<p>The last processing step is spatial correction. Collection efforts
can lead to the clustering of points and filtering can help reduce this
clustering. Here we provide functions to reduce the effects of sampling
bias using randomization approach and retain only one point per
pixel.</p>
<div class="section level5">
<h5 id="one-point-per-pixel">One Point Per Pixel<a class="anchor" aria-label="anchor" href="#one-point-per-pixel"></a>
</h5>
<p>Maxent will only retain one point per pixel. To make the ecological
niche analysis comparable, we will retain only one point per pixel.</p>
<p>Example:</p>
<pre><code><span><span class="va">galaxdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/one_point_per_pixel.html">one_point_per_pixel</a></span><span class="op">(</span><span class="va">galaxdf</span>, </span>
<span>                       resolution <span class="op">=</span> <span class="fl">0.5</span>, <span class="co"># for 30 arc sec raster layers</span></span>
<span>                       precision <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                       digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> </span></code></pre>
</div>
<div class="section level5">
<h5 id="spatial-thining">Spatial thining<a class="anchor" aria-label="anchor" href="#spatial-thining"></a>
</h5>
<p>We thin points by utilizing <code><a href="https://rdrr.io/pkg/spThin/man/thin.html" class="external-link">spThin::thin()</a></code>. This step
reduces the effects of sampling bias using a randomization approach.</p>
<p><strong>Step 1</strong>: What should your minimum distance be?</p>
<p>Here we first calculate minimum nearest neighbor distance in km:</p>
<p>Example:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dnychka/fieldsRPackage" class="external-link">fields</a></span><span class="op">)</span></span>
<span><span class="va">nnDm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fields/man/rdist.earth.html" class="external-link">rdist.earth</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>lon <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">longitude</span>, lat <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">latitude</span><span class="op">)</span><span class="op">)</span>, miles <span class="op">=</span> <span class="cn">FALSE</span>, R <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">nnDmin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">nnDm</span><span class="op">[</span>,<span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">nnDmin</span><span class="op">)</span></span></code></pre>
<p>Here the current minimum distance is 2.22 km. Based on literature, we
find a 2 meters (or 0.002 km) distance was enough to collect unique
genets, so we do not need to thin our points.</p>
<p><strong>Step 2</strong>: Thin occurrence records using spThin through
gatoRs.</p>
<p>When you do need to thin your records, here is a great function to do
so!</p>
<p>Example:</p>
<pre><code><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/thin_points.html">thin_points</a></span><span class="op">(</span><span class="va">df</span>, </span>
<span>                    distance <span class="op">=</span> <span class="fl">0.002</span>, <span class="co"># in km </span></span>
<span>                    reps <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
<div class="section level3">
<h3 id="full-clean">Full Clean<a class="anchor" aria-label="anchor" href="#full-clean"></a>
</h3>
<p>Finally, instead of step-by-step cleaning, we created a single
function to streamline this process.</p>
<p>Example:</p>
<pre><code><span><span class="co">## Read raw csv</span></span>
<span><span class="va">rawdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"base_folder/my_file.csv"</span><span class="op">)</span></span>
<span><span class="co">## Set your full clean preferences equal to the above</span></span>
<span><span class="va">df_quick_clean</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/full_clean.html">full_clean</a></span><span class="op">(</span><span class="va">rawdf</span>,</span>
<span>                            synonyms.list <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Galax urceolata"</span>, <span class="st">"Galax aphylla"</span><span class="op">)</span>, </span>
<span>                            remove.NA.occ.id <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                            remove.NA.date <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                            accepted.name <span class="op">=</span>  <span class="st">"Galax urceolata"</span>,</span>
<span>                            remove.zero <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                            precision <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                            digits <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                            remove.skewed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                            basis.list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HUMAN_OBSERVATION"</span>, <span class="st">"PRESERVED_SPECIMEN"</span>, </span>
<span>                                            <span class="st">"MATERIAL_SAMPLE"</span>,  <span class="st">"LIVING_SPECIMEN"</span>, </span>
<span>                                            <span class="st">"PreservedSpecimen"</span>, <span class="st">"Preserved Specimen"</span><span class="op">)</span>,</span>
<span>                            remove.flagged <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                            thin.points <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                            distance <span class="op">=</span> <span class="fl">0.002</span>,</span>
<span>                            reps <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                            one.point.per.pixel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="downstream-data-proccessing">Downstream Data Proccessing<a class="anchor" aria-label="anchor" href="#downstream-data-proccessing"></a>
</h2>
<div class="section level3">
<h3 id="prepared-data-for-maxent">Prepared data for MAXENT<a class="anchor" aria-label="anchor" href="#prepared-data-for-maxent"></a>
</h3>
<p>The <code><a href="../reference/data_chomp.html">data_chomp()</a></code> function subsets the data set to
include only the columns needed for Maxent: the user-provided accepted
name, latitude, and longitude.<br>
Example:</p>
<pre><code><span><span class="va">maxent_ready</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/data_chomp.html">data_chomp</a></span><span class="op">(</span><span class="va">df</span>, </span>
<span>                           accepted.name <span class="op">=</span> <span class="st">"Galax urceolata"</span> <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">maxent_ready</span>, <span class="st">"data/formaxent_Galax_urceolata_YYYYMMDD.csv"</span>, </span>
<span>          row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="prepared-data-for-publication">Prepared data for publication<a class="anchor" aria-label="anchor" href="#prepared-data-for-publication"></a>
</h3>
<p>To aid in data preparation for publication and to comply with GBIF’s
data use agreement, our <code><a href="../reference/citation_bellow.html">citation_bellow()</a></code> function will
return the citation information for these records as a list (this
function name is based on gators bellowing). Additionally, our
<code><a href="../reference/remove_redacted.html">remove_redacted()</a></code> will remove records where the aggregator
value is not equal to iDigBio or GBIF. The aggregator column can be used
to indicate where redacted records were retrieved from and thus used to
filter out non-sharable records.</p>
<p>Example:</p>
<pre><code><span><span class="co">## Retrieve GBIF citations</span></span>
<span><span class="va">GBIF_citations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/citation_bellow.html">citation_bellow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="co">## Warning, this is very slow</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">GBIF_citations</span>, <span class="st">"data/GBIF_citations_Galax_urceolata_YYYYMMDD.csv"</span>, </span>
<span>          row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Remove redacted records</span></span>
<span><span class="co">### If redacted records were retrieved, make sure to remove them before publication! Remove redacted records!</span></span>
<span><span class="va">df_pub_ready</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remove_redacted.html">remove_redacted</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">df_pub_ready</span>, <span class="st">"data/publication_ready_Galax_urceolata_YYYYMMDD.csv"</span>, </span>
<span>          row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Natalie N. Patten, Michelle L. Gaynor.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
